<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Memory Visualizer</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
#vm-chatbot-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 350px;
    height: 60px;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    font-family: Arial, sans-serif;
    z-index: 1000;
    overflow: hidden;
    transition: height 0.3s ease;
}

#vm-chatbot-container:not(.minimized) {
    height: 500px;
}

#vm-chatbot-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    display: none;
    flex-direction: column;
    background-color: #f9f9f9;
}

#vm-chatbot-container:not(.minimized) #vm-chatbot-body {
    display: flex;
}

#vm-chatbot-messages {
    flex: 1;
    margin-bottom: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#vm-chatbot-input {
    display: flex;
    gap: 10px;
    margin-top: auto;
}

#vm-chatbot-query {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

#vm-chatbot-send {
    padding: 10px 15px;
    background-color: #2c3e50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#vm-chatbot-send:hover {
    background-color: #1a252f;
}

.user-message {
    background-color: #e1f5fe;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 10px;
    margin-left: 20%;
    max-width: 80%;
    align-self: flex-end;
}

.bot-message {
    background-color: #e3f2fd;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 10px;
    max-width: 80%;
}
</style>
</head>
<body>
    <div class="background-animation"></div>
    
    <div class="container">
        <header class="app-header">
            <div class="logo">
                <i class="fas fa-memory"></i>
                <h1>Memory Visualizer Pro</h1>
            </div>
            <div class="app-controls">
                <button id="theme-toggle"><i class="fas fa-moon"></i></button>
            </div>
        </header>

        <div class="dashboard">
            <div class="control-panel glass-card">
                <h2><i class="fas fa-sliders-h"></i> Simulation Controls</h2>
                
                <div class="form-group">
                    <label for="algorithm"><i class="fas fa-project-diagram"></i> Algorithm:</label>
                    <select id="algorithm" class="styled-select">
                        <option value="FIFO">FIFO</option>
                        <option value="LRU">LRU</option>
                        <option value="LFU">LFU</option>
                        <option value="OPTIMAL">Optimal</option>
                        <option value="CLOCK">Clock</option>
                        <option value="RANDOM">Random</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="frames"><i class="fas fa-border-all"></i> Frames:</label>
                        <input type="range" id="frames" min="1" max="10" value="3">
                        <span id="frame-value">3</span>
                    </div>

                    <div class="form-group">
                        <label for="speed"><i class="fas fa-tachometer-alt"></i> Speed:</label>
                        <input type="range" id="speed" min="1" max="10" value="5">
                        <span id="speed-value">5</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="ref-string"><i class="fas fa-list-ol"></i> Reference String:</label>
                    <input type="text" id="ref-string" value="1,2,3,4,1,2,5,1,2,3,4,5">
                </div>

                <div class="button-group">
                    <button id="run" class="btn-primary"><i class="fas fa-play"></i> Run</button>
                    <button id="step" class="btn-secondary"><i class="fas fa-step-forward"></i> Step</button>
                    <button id="reset" class="btn-danger"><i class="fas fa-redo"></i> Reset</button>
                </div>
            </div>

            <div class="visualization-container">
                <div class="memory-visualization glass-card">
                    <h2><i class="fas fa-microchip"></i> Memory State</h2>
                    <div id="memory-display"></div>
                </div>

                <div class="stats-panel glass-card">
                    <h2><i class="fas fa-chart-bar"></i> Statistics</h2>
                    <div id="stats"></div>
                    <div class="chart-container">
                        <canvas id="stats-chart"></canvas>
                    </div>
                </div>
            </div>

            <div class="timeline-container glass-card">
                <h2><i class="fas fa-history"></i> Timeline</h2>
                <div id="timeline"></div>
            </div>
        </div>
    </div>
    <div id="vm-chatbot-container" class="minimized">
    <div id="vm-chatbot-header" style="background-color: #2c3e50; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; cursor: pointer;">
        <h3 style="margin: 0; font-size: 16px;">Virtual Memory Assistant</h3>
        <div id="vm-chatbot-toggle" style="font-size: 20px;">+</div>
    </div>
    <div id="vm-chatbot-body" style="flex: 1; padding: 15px; overflow-y: auto; display: none; background-color: #f9f9f9;">
        <div id="vm-chatbot-messages" style="margin-bottom: 15px;">
            <div class="bot-message" style="background-color: #e3f2fd; padding: 10px; border-radius: 5px; margin-bottom: 10px; max-width: 80%;">
                Hello! I'm your Virtual Memory Management assistant. Ask me about paging, segmentation, page replacement algorithms, or any related topics!
            </div>
        </div>
        <div id="vm-chatbot-input" style="display: flex; gap: 10px;">
            <input type="text" id="vm-chatbot-query" placeholder="Ask about virtual memory..." style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
            <button id="vm-chatbot-send" style="padding: 10px 15px; background-color: #2c3e50; color: white; border: none; border-radius: 5px; cursor: pointer;">Send</button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('vm-chatbot-container');
    const header = document.getElementById('vm-chatbot-header');
    const toggle = document.getElementById('vm-chatbot-toggle');
    const body = document.getElementById('vm-chatbot-body');
    const messages = document.getElementById('vm-chatbot-messages');
    const queryInput = document.getElementById('vm-chatbot-query');
    const sendBtn = document.getElementById('vm-chatbot-send');

    // Toggle chatbot
    header.addEventListener('click', function() {
        if (container.classList.contains('minimized')) {
            container.classList.remove('minimized');
            body.style.display = 'flex';
            toggle.textContent = '-';
        } else {
            container.classList.add('minimized');
            body.style.display = 'none';
            toggle.textContent = '+';
        }
    });

    // Send message
    function sendMessage() {
        const query = queryInput.value.trim();
        if (query) {
            // Add user message
            const userMsg = document.createElement('div');
            userMsg.className = 'user-message';
            userMsg.style = 'background-color: #e1f5fe; padding: 10px; border-radius: 5px; margin-bottom: 10px; margin-left: 20%; max-width: 80%; align-self: flex-end;';
            userMsg.textContent = query;
            messages.appendChild(userMsg);
            
            queryInput.value = '';
            
            // Simulate bot typing
            const typing = document.createElement('div');
            typing.className = 'bot-message';
            typing.style = 'background-color: #e3f2fd; padding: 10px; border-radius: 5px; margin-bottom: 10px; max-width: 80%; font-style: italic; color: #666;';
            typing.textContent = 'Thinking...';
            messages.appendChild(typing);
            
            // Scroll to bottom
            messages.scrollTop = messages.scrollHeight;
            
            // Get bot response (in a real implementation, this would be an API call)
            setTimeout(() => {
                typing.textContent = getBotResponse(query);
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
        }
    }

    // Handle send button click
    sendBtn.addEventListener('click', sendMessage);
    
    // Handle Enter key
    queryInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    // Bot response logic
    function getBotResponse(query) {
        const lowerQuery = query.toLowerCase();
        
        // Virtual memory basics
        if (lowerQuery.includes('what is virtual memory') || lowerQuery.includes('explain virtual memory')) {
            return "Virtual memory is a memory management technique that creates an illusion to users of a very large memory. It allows execution of processes that may not be completely in memory by storing parts not currently in use on disk. This enables efficient memory utilization and lets programs use more memory than is physically available.";
        }
        
        // Paging
        else if (lowerQuery.includes('paging') || lowerQuery.includes('page table')) {
            return "Paging is a memory management scheme that eliminates the need for contiguous allocation of physical memory. The logical address space is divided into fixed-size pages, and physical memory is divided into frames of the same size. A page table maps logical pages to physical frames. Benefits include reduced external fragmentation and efficient memory allocation.";
        }
        
        // Segmentation
        else if (lowerQuery.includes('segmentation')) {
            return "Segmentation divides memory into logical segments of varying sizes (like code, data, stack segments). Each segment has a base address and limit. The CPU generates logical addresses with a segment number and offset. Segmentation allows logical organization of memory but can lead to external fragmentation.";
        }
        
        // Page replacement algorithms
        else if (lowerQuery.includes('page replacement') || lowerQuery.includes('fifo') || lowerQuery.includes('lru')) {
            return "Common page replacement algorithms:\n1. FIFO (First-In-First-Out): Replaces the oldest page\n2. LRU (Least Recently Used): Replaces the least recently accessed page\n3. Optimal: Replaces the page not needed for longest time (theoretical)\n4. Clock: Approximation of LRU using a circular list and reference bits\nLRU is often preferred but more expensive to implement than FIFO.";
        }
        
        // TLB
        else if (lowerQuery.includes('tlb') || lowerQuery.includes('translation lookaside buffer')) {
            return "The Translation Lookaside Buffer (TLB) is a cache that stores recent virtual-to-physical address translations to speed up memory access. When a virtual address is generated, the TLB is checked first. On a TLB hit, the physical address is obtained immediately. On a miss, the page table must be consulted, which is slower. TLB performance is crucial for system speed.";
        }
        
        // Thrashing
        else if (lowerQuery.includes('thrashing')) {
            return "Thrashing occurs when a system spends more time handling page faults than executing processes. This happens when the system is severely overcommitted (too many processes for available memory). Symptoms include high disk activity and low CPU utilization. Solutions include reducing multiprogramming level, increasing memory, or using better page replacement algorithms.";
        }
        
        // Default response
        return "I'm not sure I understand your question about virtual memory. Could you try rephrasing or asking about a specific aspect like paging, segmentation, page replacement algorithms, or TLBs?";
    }
});
</script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>